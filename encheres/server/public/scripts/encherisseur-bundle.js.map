{"version":3,"file":"scripts/encherisseur-bundle.js","mappings":";;;;;AAAA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA,yFAAyF,SAAS;AAClG,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,gEAAgE,SAAS;AACzE,+CAA+C,SAAS,QAAQ,SAAS;AACzE;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,yDAAyD,KAAK;AAC9D;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oEAAoE,SAAS;AAC7E,6FAA6F,SAAS,kBAAkB,SAAS;AACjI,SAAS;AACT;;AAEA;AACA,CAAC","sources":["webpack://client-app/./src/scripts/encherisseur.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    const socket = io();\n    let bidderId;\n    let auctionInProgress = false;\n\n\n    socket.emit('bidder');\n\n    socket.on('connected', (socketId) => {\n        bidderId = socketId;\n        console.log(\"Connecté au serveur de sockets en tant qu'enchérisseur avec l'ID :\", socketId);\n        document.getElementById('welcome-span').innerText = `Votre ID d'enchérisseur : ${socketId}`;\n    });\n\n    socket.on('joinBidder', () => {\n        console.log(\"Un enchérisseur a rejoint les enchères\");\n        document.getElementById('welcome-span').innerText = `Vous pouvez commencer à enchérir`;\n    });\n\n    socket.on('auctionStarted', (item, initialPrice) => {\n        console.log(\"Début de l'enchère pour l'objet :\", item);\n        document.getElementById('time-remaining').innerText = 'En cours';\n        document.getElementById('current-price').innerText = initialPrice + '€';\n        document.getElementById('bid-options').style.display = 'block';\n\n        auctionInProgress = true;\n        updateWelcomeSpan(item, initialPrice);\n    });\n\n    socket.on('bidReceived', (bidderId, amount) => {\n        const currentPrice = parseInt(document.getElementById('current-price').innerText);\n        const newPrice = currentPrice + amount;\n        document.getElementById('current-price').innerText = `${newPrice}€`;\n        console.log(`Montant actuel estimé : ${newPrice}€ par ${bidderId}`);\n        updateWelcomeSpan(null, newPrice);\n    });\n\n    socket.on('auctionEnded', () => {\n        console.log('Reçu : auctionEnded');\n        document.getElementById('time-remaining').innerText = 'Vente aux enchères terminée';\n        alarm('les enchères sont terminées.');\n        auctionInProgress = false;\n        updateWelcomeSpan('Aucune enchère en cours', null);\n    });\n\n    socket.on('bidderLeft', () => {\n        alert(\"Un enchérisseur a quitté la vente.\");\n    });\n\n\n    function updateWelcomeSpan(item, price) {\n        let message = 'Aucune enchère en cours';\n        if (auctionInProgress && item && price !== null) {\n            message = `Enchère en cours pour l'objet : ${item}`;\n        }\n        document.getElementById('welcome-span').innerText = message;\n    }  \n\n\n    function setup() {\n        const bidButtons = document.querySelectorAll('.bid-options button');\n\n        bidButtons.forEach(button => {\n            button.addEventListener('click', function() {\n                const amount = parseInt(this.dataset.amount);\n                placeBid(socket, bidderId, amount);\n            });\n        });\n    }\n\n    function placeBid(socket, bidderId, amount) {\n        socket.emit('bid', bidderId, amount);\n\n        socket.on('bidConfirmed', () => {\n            const currentPrice = parseInt(document.getElementById('current-price').innerText);\n            const newPrice = currentPrice + amount;\n            document.getElementById('current-price').innerText = `${newPrice}€`;\n            document.getElementById('welcome-span').innerText = `Votre ID d'enchérisseur : ${bidderId}, Prix actuel : ${newPrice}€`;\n        });\n    }\n\n    setup();\n});\n"],"names":[],"sourceRoot":""}