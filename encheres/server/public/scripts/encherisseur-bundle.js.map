{"version":3,"file":"scripts/encherisseur-bundle.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,SAAS;AAClG,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,WAAW;AAC1F;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,kHAAkH,UAAU,oBAAoB,WAAW;AAC3J;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,KAAK;AAC9D,8BAA8B,MAAM;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC","sources":["webpack://client-app/./src/scripts/encherisseur.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    let bidderId;\r\n    let auctionInProgress = false;\r\n\r\n    const socket = io();\r\n    socket.emit('bidder');\r\n\r\n    socket.on('connected', (socketId) => {\r\n        bidderId = socketId;\r\n        console.log(\"Connecté au serveur de sockets en tant qu'enchérisseur avec l'ID :\", socketId);\r\n        document.getElementById('welcome-span').innerText = `Votre ID d'enchérisseur : ${socketId}`;\r\n    });\r\n\r\n    socket.on('joinBidder', () => {\r\n        console.log(\"Un enchérisseur a rejoint les enchères\");\r\n        document.getElementById('welcome-span').innerText = `Vous pouvez commencer à enchérir.`;\r\n    });\r\n\r\n    socket.on('startBidder', () =>{\r\n      console.log(\"Un enchérisseur est en attente.\");\r\n      document.getElementById('welcome-span').innerText = ` Une vente aux enchères est déjà en cours. Veuillez attendre qu'elle soit terminée.`;\r\n      document.getElementById('time-remaining').innerText = 'en attente';\r\n      document.getElementById('current-price').innerText = '-€';\r\n      return;\r\n    });\r\n\r\n    socket.on('auctionStarted', (item, initialPrice) => {\r\n        if (auctionInProgress) {\r\n            console.log(\"Une vente a été commencée.\");\r\n            return;\r\n        }\r\n        auctionInProgress = true;\r\n        console.log(\"Début de l'enchère pour l'objet :\", item);\r\n        document.getElementById('time-remaining').innerText = item;\r\n        document.getElementById('current-price').innerText = initialPrice + '€';\r\n        document.getElementById('bid-options').style.display = 'block';\r\n\r\n        updateWelcomeSpan(item, initialPrice);\r\n    });\r\n\r\n    socket.on('bidReceived', (bidderId, amount) =>{\r\n      const current = document.getElementById('current-price');\r\n      let currentPriceValue = parseInt(current.innerText);\r\n      currentPriceValue += parseInt(amount);\r\n      current.innerText = currentPriceValue;\r\n\r\n    });\r\n\r\n    socket.on('winner', (bidderId,currentBid) => {\r\n        console.log(\"vous etes le gagnant de l'enchere\");\r\n        const currentPriceElement = document.getElementById('current-price');\r\n        currentBid = parseInt(currentPriceElement.innerText);\r\n        document.getElementById('welcome-span').innerText = `Félicitations, vous l'avez emportée !! `;\r\n        alert(`Félicitations, vous avez remporté l'enchère avec une offre de ${currentBid}€.`);\r\n        const bidButtons = document.querySelectorAll('.bid-options button');\r\n        bidButtons.forEach(button => {\r\n            button.disabled = true;\r\n        });\r\n        document.getElementById('time-remaining').innerText = 'Vente aux enchères terminée';\r\n        document.getElementById('current-price').innerText = '-';\r\n    });\r\n\r\n\r\n\r\n\r\n    socket.on('auctionEndedForBidders',() => {\r\n        alert(\"La vente aux enchères est terminée. Vous ne pouvez plus soumettre d'offres.\");\r\n        document.getElementById('time-remaining').innerText = 'Vente aux enchères terminée';\r\n        document.getElementById('current-price').innerText = '-';\r\n        const bidButtons = document.querySelectorAll('.bid-options button');\r\n        bidButtons.forEach(button => {\r\n            button.disabled = true;\r\n        });\r\n        auctionInProgress = false;\r\n        document.getElementById('welcome-span').innerText = \"La vente aux enchères est terminée. Le gagnant est ${bidderId} avec une offre de ${currentBid}€.\";\r\n        //updateWelcomeSpan('Aucune enchère en cours', null);\r\n    });\r\n\r\n    socket.on('auctionEndedWithoutWinner', () => {\r\n        document.getElementById('welcome-span').innerText = \"La vente aux enchères est terminée sans gagnant.\";\r\n        alert(\"La vente aux enchères est terminée sans gagnant.\");\r\n        const bidButtons = document.querySelectorAll('.bid-options button');\r\n        bidButtons.forEach(button => {\r\n            button.disabled = true;\r\n        });\r\n    });\r\n\r\n\r\n\r\n\r\n    socket.on('auctioneerLeft', (auctioneerId) => {\r\n        document.getElementById('welcome-span').innerText = `Le commissaire priseur a quitté la vente.`;\r\n        alert(\"Le commissaire priseur a quitté la vente. Les enchères sont annulées.\");\r\n        const bidButtons = document.querySelectorAll('.bid-options button');\r\n        bidButtons.forEach(button => {\r\n            button.disabled = true;\r\n        });\r\n    });\r\n\r\n\r\n    socket.on('bidderLeft', () => {\r\n        alert(\"Un enchérisseur a quitté la vente.\");\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n    function updateWelcomeSpan(item, price) {\r\n        let message = 'En attente';\r\n        let displayPrice = 'En attente';\r\n        if (auctionInProgress && item && price !== null) {\r\n            message = `Enchère en cours pour l'objet : ${item}`;\r\n            displayPrice = `${price}€`;\r\n        }\r\n        document.getElementById('welcome-span').innerText = message;\r\n        document.getElementById('current-price').innerText = displayPrice;\r\n    }\r\n\r\n\r\n    function setup() {\r\n        const bidButtons = document.querySelectorAll('.bid-options button');\r\n\r\n        bidButtons.forEach(button => {\r\n            button.addEventListener('click', function() {\r\n                const amount = parseInt(this.dataset.amount);\r\n                const currentPriceElement = document.getElementById('current-price');\r\n                const newPrice = amount + parseInt(currentPriceElement.innerText);\r\n                currentPriceElement.innerText = `${newPrice}€`;\r\n                placeBid( bidderId, amount);\r\n            });\r\n        });\r\n    }\r\n\r\n    function placeBid(bidderId, amount) {\r\n        socket.emit('bid', bidderId, amount);\r\n    }\r\n\r\n    setup();\r\n});\r\n"],"names":[],"sourceRoot":""}