{"version":3,"file":"scripts/encherisseur-bundle.js","mappings":";;;;;AAAA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,yFAAyF,SAAS;AAClG,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,KAAK;;;;AAIL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;;;;AAKL;AACA;AACA;AACA;AACA,yDAAyD,KAAK;AAC9D,8BAA8B,MAAM;AACpC;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA,CAAC","sources":["webpack://client-app/./src/scripts/encherisseur.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    let bidderId;\n    let auctionInProgress = false;\n\n    const socket = io();\n    socket.emit('bidder');\n\n    socket.on('connected', (socketId) => {\n        bidderId = socketId;\n        console.log(\"Connecté au serveur de sockets en tant qu'enchérisseur avec l'ID :\", socketId);\n        document.getElementById('welcome-span').innerText = `Votre ID d'enchérisseur : ${socketId}`;\n    });\n\n    socket.on('joinBidder', () => {\n        console.log(\"Un enchérisseur a rejoint les enchères\");\n        document.getElementById('welcome-span').innerText = `Vous pouvez commencer à enchérir.`;\n    });\n\n    socket.on('startBidder', () =>{\n      console.log(\"Un enchérisseur est en attente.\");\n      document.getElementById('welcome-span').innerText = ` Une vente aux enchères est déjà en cours. Veuillez attendre qu'elle soit terminée.`;\n      document.getElementById('time-remaining').innerText = 'en attente';\n      document.getElementById('current-price').innerText = '-€';\n      return;\n    });\n\n    socket.on('auctionStarted', (item, initialPrice) => {\n        if (auctionInProgress) {\n            console.log(\"Une vente a été commencée.\");\n            return;\n        }\n        auctionInProgress = true;\n        console.log(\"Début de l'enchère pour l'objet :\", item);\n        document.getElementById('time-remaining').innerText = item;\n        document.getElementById('current-price').innerText = initialPrice + '€';\n        document.getElementById('bid-options').style.display = 'block';\n\n        updateWelcomeSpan(item, initialPrice);\n    });\n\n    socket.on('bidReceived', (bidderId, amount) =>{\n      const current = document.getElementById('current-price');\n      let currentPriceValue = parseInt(current.innerText);\n      currentPriceValue += parseInt(amount);\n      current.innerText = currentPriceValue;\n\n    });\n\n\n\n    socket.on('auctionEndedForBidders', () => {\n        alert(\"La vente aux enchères est terminée. Vous ne pouvez plus soumettre d'offres.\");\n        document.getElementById('time-remaining').innerText = 'Vente aux enchères terminée';\n        document.getElementById('current-price').innerText = '-';\n        const bidButtons = document.querySelectorAll('.bid-options button');\n        bidButtons.forEach(button => {\n            button.disabled = true;\n        });\n        auctionInProgress = false;\n        updateWelcomeSpan('Aucune enchère en cours', null);\n    });\n\n    socket.on('updateBidAmount', (amount) => {\n        console.log(\"gagnant de l'enchere\");\n        const currentPriceElement = document.getElementById('current-price');\n        currentPriceElement.innerText = `${amount}€`;\n        document.getElementById('welcome-span').innerText = `Vous l'avez emportée !! `;\n    });\n\n\n    socket.on('auctioneerLeft', () => {\n        document.getElementById('welcome-span').innerText = `Le commissaire priseur a quitté la vente.`;\n        alert(\"Le commissaire priseur a quitté la vente. Les enchères sont annulées.\");\n        const bidButtons = document.querySelectorAll('.bid-options button');\n        bidButtons.forEach(button => {\n            button.disabled = true;\n        });\n    });\n\n    \n    socket.on('bidderLeft', () => {\n        alert(\"Un enchérisseur a quitté la vente.\");\n    });\n\n\n\n\n    function updateWelcomeSpan(item, price) {\n        let message = 'En attente';\n        let displayPrice = 'En attente';\n        if (auctionInProgress && item && price !== null) {\n            message = `Enchère en cours pour l'objet : ${item}`;\n            displayPrice = `${price}€`;\n        }\n        document.getElementById('welcome-span').innerText = message;\n        document.getElementById('current-price').innerText = displayPrice;\n    }\n\n\n    function setup() {\n        const bidButtons = document.querySelectorAll('.bid-options button');\n\n        bidButtons.forEach(button => {\n            button.addEventListener('click', function() {\n                const amount = parseInt(this.dataset.amount);\n                const currentPriceElement = document.getElementById('current-price');\n                const newPrice = amount + parseInt(currentPriceElement.innerText);\n                currentPriceElement.innerText = `${newPrice}€`;\n                placeBid( bidderId, amount);\n            });\n        });\n    }\n\n    function placeBid(bidderId, amount) {\n        socket.emit('bid', bidderId, amount);\n    }\n\n    setup();\n});\n"],"names":[],"sourceRoot":""}