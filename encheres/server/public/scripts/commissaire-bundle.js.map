{"version":3,"file":"scripts/commissaire-bundle.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0FAA0F,cAAc;AACxG,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,SAAS;AAC7E,qFAAqF,OAAO,kBAAkB,SAAS;AACvH,KAAK;AACL;AACA;AACA;AACA;AACA,8FAA8F,UAAU,oBAAoB,WAAW;AACvI,+CAA+C,UAAU,oBAAoB,WAAW;AACxF,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC","sources":["webpack://client-app/./src/scripts/commissaire-priseur.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    let highestBid = 0;\r\n    let winningBidder = null;\r\n    let auctionInProgress = false;\r\n\r\n\r\n    document.getElementById('start-button').addEventListener('click', () => start());\r\n    document.getElementById('end-button').addEventListener('click', () => end());\r\n\r\n\r\n    const socket = io();\r\n    socket.emit('auctioneer');\r\n\r\n\r\n\r\n    function start() {\r\n        if (auctionInProgress) {\r\n            alert(\"Il y a déjà une vente aux enchères en cours. Attendez qu'elle soit terminée.\");\r\n            return;\r\n        }\r\n        const item = document.getElementById('objet').value.trim();\r\n        const initialPrice = document.getElementById('prix').value.trim();\r\n        if (item !== '' && initialPrice !== '') {\r\n            socket.emit('startAuction', item, initialPrice);\r\n            auctionInProgress = true;\r\n        } else {\r\n            alert(\"Veuillez spécifier un objet et un prix avant de démarrer l'enchère.\");\r\n        }\r\n    }\r\n\r\n    function end() {\r\n        socket.emit('endAuction');\r\n        auctionInProgress = false;\r\n        alert(\"Vente aux enchères terminée !\");\r\n    }\r\n\r\n\r\n\r\n    socket.on('connected', () => {\r\n        console.log('Connecté au serveur de sockets en tant que commissaire-priseur');\r\n        document.getElementById('commissaire-info').innerText = `Vous êtes connecté en tant que commissaire-priseur`;\r\n    });\r\n\r\n    socket.on('auctioneerJoined', () => {\r\n        console.log(\"Le commissaire a rejoint les enchères\");\r\n        document.getElementById('commissaire-info').innerText = `Vous êtes le commissaire priseur n°1.`;\r\n    });\r\n\r\n    socket.on('auctionAlreadyInProgress', () => {\r\n        alert(\"Il y a déjà un commissaire-priseur.\");\r\n        document.getElementById('commissaire-info').innerText = `Il y a déjà un commissaire-priseur.`;\r\n        const encheresForm = document.getElementById('enchere-form');\r\n        if (encheresForm) {\r\n            encheresForm.remove();\r\n        }\r\n    });\r\n\r\n    socket.on('auctionStarted', (item, initialPrice) => {\r\n        document.getElementById('montant-actuel').innerText = `Montant actuel enchère : ${initialPrice} €`;\r\n    });\r\n\r\n    socket.on('bidReceived', (bidderId, amount) => {\r\n        const currentPriceElement = document.getElementById('montant-actuel');\r\n        const currentPriceText = currentPriceElement.innerText.replace('Montant actuel enchère : ', '');\r\n        const currentPrice = parseInt(currentPriceText);\r\n        const newPrice = currentPrice + amount;\r\n        currentPriceElement.innerText = `Montant actuel enchère : ${newPrice}€`;\r\n        document.getElementById('commissaire-info').innerText = `Offre confirmée : ${amount}€ de la part de ${bidderId}.`;\r\n    });\r\n\r\n    socket.on('winner', (bidderId, currentBid) => {\r\n        const currentPriceElement = document.getElementById('montant-actuel');\r\n        currentBid = parseInt(currentPriceElement.innerText);\r\n        document.getElementById('commissaire-info').innerText =\"Le gagnant de l'enchère est ${bidderId} avec une offre de ${currentBid}€.\";\r\n        //alert(`Le gagnant de l'enchère est ${bidderId} avec une offre de ${currentBid}€.`);\r\n    });\r\n\r\n\r\n    socket.on('auctionEndedForBidders', () => {\r\n        alert(\"Les enchères sont terminées.\");\r\n        auctionInProgress = false;\r\n        document.getElementById('commissaire-info').innerText = 'Vente terminée';\r\n        const encheresForm = document.getElementById('enchere-form');\r\n        if (encheresForm) {\r\n            encheresForm.remove();\r\n        }\r\n    });\r\n    socket.on('auctionEndedWithoutWinner', () => {\r\n        document.getElementById('commissaire-info').innerText = \"La vente aux enchères est terminée sans gagnant.\";\r\n        alert(\"La vente aux enchères est terminée sans gagnant.\");\r\n        const encheresForm = document.getElementById('enchere-form');\r\n        if (encheresForm) {\r\n            encheresForm.remove();\r\n        }\r\n    });\r\n\r\n\r\n\r\n    socket.on('auctioneerLeft', () => {\r\n        console.log(\"le comissaire est parti\");\r\n        alert(\"Le commissaire priseur a quitté la vente. Les enchères sont annulées.\");\r\n        //document.getElementById('montant-actuel').innerText = 'Vente terminée';\r\n    });\r\n\r\n\r\n\r\n});\r\n"],"names":[],"sourceRoot":""}